(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n.n(r),c=n(3),i="",s=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COUNTRY_INFO_WEATHERSTACK_API_KEY:"04d12abb0180279aa9271b48afe2cf24"}).REACT_APP_PHONEBOOK_SERVER_URL||"/api/")+"persons",o="A person with name {} has already been added to the phonebook. Would you like to update their information?",u=n(2),l=n(0),d=function(e){var t=e.content;return Object(l.jsx)("h1",{children:t})},b=function(e){var t=e.content;return Object(l.jsx)("h2",{children:t})},f=function(e){var t=e.entry,n=e.deleteHandler;return Object(l.jsxs)("div",{children:[t.name,":"," ",t.phoneNumber,Object(l.jsx)("button",{"data-id":t.id,onClick:n,children:"Delete"})]})},j=n(4),O=n.n(j);function h(e){return e.then((function(e){return e.data}))}var m={getAll:function(){var e=s;return h(O.a.get(e))},create:function(e){var t=s;return h(O.a.post(t,e))},update:function(e){var t="".concat(s,"/").concat(e.id);return h(O.a.put(t,e))},delete:function(e){var t="".concat(s,"/").concat(e);return O.a.delete(t)}},v={text:i,filter:i};var p=function(e){var t=e.title,n=e.entries,r=e.setEntries,a=e.setInfoMessage,i=e.setErrorMessage,s=Object(u.useState)(v),o=Object(c.a)(s,2),d=o[0],j=o[1];function O(e){var t=Number(e.target.dataset.id),c=n.find((function(e){return e.id===t}));(function(e){var t='Do you want to delete entry called "'.concat(e,'"?');return!window.confirm(t)})(c.name)||m.delete(t).then((function(){var e='Entry "'.concat(c.name,'" was successfully deleted.');a(e),setTimeout((function(){return a(null)}),5e3)})).catch((function(e){var n="Unable to delete entry ".concat(t," (").concat(c.name,") from the server. ")+"Maybe it was deleted earlier or did never exist.";i(n),setTimeout((function(){return i(null)}),5e3)})).finally(r(n.filter((function(e){return e.id!==t}))))}return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b,{content:t}),Object(l.jsxs)("div",{children:["Filter with:",Object(l.jsx)("input",{value:d.text,onChange:function(e){var t=e.target.value,n={text:t,filter:t.trim().toUpperCase()};j(n)}})]}),n.filter((function(e){return e.name.toUpperCase().includes(d.filter)})).map((function(e){return Object(l.jsx)(f,{entry:e,deleteHandler:O},e.id)}))]})},x=n(6),E=function(e){var t=e.title,n=e.entries,r=e.setEntries,a=e.setInfoMessage,s=e.setErrorMessage,d=Object(u.useState)(i),f=Object(c.a)(d,2),j=f[0],O=f[1],h=Object(u.useState)(i),v=Object(c.a)(h,2),p=v[0],E=v[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b,{content:t}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=j.trim();if(t.length<1){s("An empty name cannot be added to the phonebook."),setTimeout((function(){return s(null)}),5e3)}else{var c=t.toUpperCase(),u=p.trim();if(u.length<1){s("An empty phone number cannot be added to the phonebook."),setTimeout((function(){return s(null)}),5e3)}else{var l=n.find((function(e){return e.name.toUpperCase()===c}));if(l){var d=o.replace("{}",l.name);if(window.confirm(d)){var b=Object(x.a)(Object(x.a)({},l),{},{phoneNumber:u});m.update(b).then((function(e){var t=n.map((function(t){return t.id!==b.id?t:e}));r(t);var c='Entry "'.concat(b.name,'" was successfully updated.');a(c),setTimeout((function(){return a(null)}),5e3)}))}}else{var f={name:t,phoneNumber:u};m.create(f).then((function(e){r(n.concat(e));var t='Entry "'.concat(f.name,'" was successfully added.');a(t),setTimeout((function(){return a(null)}),5e3)}))}}}O(i),E(i)},children:[Object(l.jsxs)("div",{children:["Name: ",Object(l.jsx)("input",{value:j,onChange:function(e){return O(e.target.value)}})]}),Object(l.jsxs)("div",{children:["Number: ",Object(l.jsx)("input",{value:p,onChange:function(e){return E(e.target.value)}})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"Add"})})]})]})},g=function(e){var t=e.content,n=e.baseClass,r=e.messageVisibleClass;null===t&&(t="");var a=n;return null!==t&&t.length>0&&(a+=" "+r),Object(l.jsx)("div",{className:a,children:t})},C=function(){var e=Object(u.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],a=Object(u.useState)(null),i=Object(c.a)(a,2),s=i[0],o=i[1],b=Object(u.useState)(null),f=Object(c.a)(b,2),j=f[0],O=f[1];return Object(u.useEffect)((function(){m.getAll().then((function(e){return r(e)}))}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d,{content:"Phonebook"}),Object(l.jsx)(E,{title:"Add a New Entry",entries:n,setEntries:r,setInfoMessage:O,setErrorMessage:o}),Object(l.jsx)(g,{content:s,baseClass:"notificationBox",messageVisibleClass:"errorVisible"}),Object(l.jsx)(g,{content:j,baseClass:"notificationBox",messageVisibleClass:"infoVisible"}),Object(l.jsx)(p,{title:"Saved Entries",entries:n,setEntries:r,setInfoMessage:O,setErrorMessage:o})]})};n(39);a.a.render(Object(l.jsx)(C,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5afefdee.chunk.js.map